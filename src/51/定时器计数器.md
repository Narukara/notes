### 定时器/计数器

定时器/计数器 T0 (P3.4)

- 16位 TL0 TH0

定时器/计数器 T1 (P3.5)

- 16位 TL1 TH1 

**方式控制寄存器TMOD (不支持位寻址)**

|  D7  |  D6  |  D5  |  D4  |  D3  |  D2  |  D1  |  D0  |
| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |
| GATE | C/T  |  M1  |  M0  | GATE | C/T  |  M1  |  M0  |
|  T1  |      |      |      |  T0  |      |      |      |

- GATE = 0 时, 定时器/计数器工作仅受 TR0/TR1 的控制, TR0/TR1 = 1 时工作;
- GATE = 1 时, 定时器/计数器工作受 TR0/TR1 和外部引脚 INT0/INT1控制, 均为1时工作.
  - INT0 : P3.2 ; INT1 : P3.3
- C/T = 0 时, 以定时器方式工作, 将外部晶振的12分频信号作为计数信号;
- C/T = 1 时, 以计数器方式工作, 接受 T0/T1 的负跳变, 最高频率为晶振频率的$\frac{1}{24}$.
- 常用GATE = 1, C/T = 0的方式测量 INT0/INT1 正脉冲的宽度

|  M1  |  M0  | 工作模式 |                  功能                   |
| :--: | :--: | :------: | :-------------------------------------: |
|  0   |  0   |  模式0   |      13位 (**TL的低5位和TH的8位**)      |
|  0   |  1   |  模式1   |                  16位                   |
|  1   |  0   |  模式2   |        8位, TL自动重新装入TH初值        |
|  1   |  1   |  模式3   | T0分为两个8位,TH0仅定时,占用T1,T1不可用 |

**控制寄存器TCON**

| D7   | D6   | D5   | D4   | D3   | D2   | D1   | D0   |
| ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| TF1  | TR1  | TF0  | TR0  | IE1  | IT1  | IE0  | IT0  |

- TF1 : 定时器/计数器T1的溢出标志位
- TR1 : 定时器/计数器T1的启/停控制位
- TF0 : 定时器/计数器T0的溢出标志位
- TR0 : 定时器/计数器T0的启/停控制位